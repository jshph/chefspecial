<html>
<head>
    <title>Sound Butler, at your service</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="sdk.js"></script>
    <script src="http://connect.soundcloud.com/sdk.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script>
        SC.initialize({
            //MAC:
            client_id: '8077356610fc30a730afebd4e4c8b422',
            redirect_uri: 'http://localhost:8888/chefspecial/test.html'
            //WINDOWS:
            
        });

        function getUserPlaylist () {
            $("button").on('click', function(){
                var newPlaylist = prompt("Playlist Name:");
                return newPlaylist;
            });
        };

        /*function addUserPlaylist () {
            SC.get('/playlists/newPlaylist', function(track) {
                SC.oEmbed(track.permalink_url, document.getElementById('displayContainer'));
            });
        }; */
        

        //var trackList = [];
       /* $(document).ready(function() {
          
            SC.get('/playlists/electronic', function(track) {

            //for each track in trackList, perform GET request to favoriters to search their favorited tracks
            // final display of soundcloud widget
                SC.oEmbed(track.permalink_url, document.getElementById('displayContainer'));
            }); */
            
            $(document).ready(function(){
               $('a.connect').on('click', function(e){
                    e.preventDefault();
                    SC.connect(function(){
                        //var newPlaylist = 'electronic';
                       //console.log(newPlaylist);
                        SC.get('/me/playlists/', function(playlists) {
                            //$('#username').html(me.username);
                            var clickedIndex;
                            $(playlists).each(function(index, playlist) {
                                //console.log(playlist.permalink_url);
                                var ele = $("<button>").data("arrayIndex", index)
                                                .on("click", function() {
                                                    var clickedIndex = $(this).index;
                                                    //console.log(playlist.permalink_url);
                                                });
                                $('.playlistWrapper').append(ele);
                                $(ele).html(playlist.title);
                            });

                            console.log(playlists[clickedIndex]);
                            // $(playlists).each(function(index, playlist) {
                            //     console.log(playlist.permalink_url);
                            // //SC.oEmbed(playlist[0].permalink_url, document.getElementById('displayContainer'));
                            // }) 
                            
                            
                            //addUserPlaylist();
                        });
                    });
                });
            });
                
                /*$('a.connect').on('click', function(e) {
                    e.preventDefault();
                    SC.connect(function(){
                    SC.get('/me', function(me) {
                        $('#username').html(me.username);
                    SC.isConnected();   
                    });
                });
              }); */    
            
   // });


/* $(document).ready(function() {
  SC.get('/tracks', { genres: 'hiphop', shared_to_count: 1}, function(tracks) {
  $(tracks).each(function(index, track) {
  $('#results').append($('<li></li>').html(track.title + ' - ' + track.genre));
   });
  });
}); */
</script>



</head>
<body>
    <div class="wrapper">
        
        <p>Chef's Special</p>
        <a href="#" class="connect">Connect With SoundCloud</a>
        <p>Hello your name is <span id="username"></span></p>
        <button id="addPlaylist">Add a Playlist</button>
        </br>
        <div class="playlistWrapper"></div>
        <div class="songsContainer" id="displayContainer"></div>
        

        </div>
    
        
    
</body>









  <!--for (var i = 0; i < playlist.tracks.length; i++) {
    //console.log(playlist.tracks[i].permalink_url);
    trackList.push(playlist.tracks[i].permalink_url);
  }

  //trackList updated now
    for (var i = 0; i < trackList.length; i++) {
        SC.oEmbed(trackList[i], document.getElementById('displayContainer'));
    }-->